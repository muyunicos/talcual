<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Partida - TalCual</title>
    <link rel="icon" href="icon.webp" type="image/webp">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; padding: 20px;">
        <div class="game-creation-container">
            <h1>ğŸ“º Crear Partida</h1>
            <div class="subtitle">Configura tu sala de juego</div>

            <div id="creation-form">
                <div class="input-group">
                    <label class="input-label">CÃ³digo de Sala</label>
                    <input type="text" id="game-code-input" class="input-field" 
                           placeholder="PLAYA" maxlength="6" autocomplete="off">
                </div>

                <button class="btn-create-game" id="btn-create">ğŸ® Crear Sala</button>
            </div>

            <div id="game-code-display">
                <div class="instruction">Comparte este cÃ³digo con los jugadores:</div>
                <div class="code" id="game-code"></div>
                <button class="btn-open-host" id="btn-open-host">ğŸ–¥ï¸ Abrir Pantalla del Host</button>
            </div>

            <div class="btn-back">
                <a href="index.html">â† Volver</a>
            </div>
        </div>
    </div>

    <script>
        const gameCodeInput = document.getElementById('game-code-input');
        const btnCreate = document.getElementById('btn-create');
        const gameCodeDisplay = document.getElementById('game-code-display');
        const gameCodeElement = document.getElementById('game-code');
        const creationForm = document.getElementById('creation-form');
        const btnOpenHost = document.getElementById('btn-open-host');

        btnCreate.addEventListener('click', createGame);
        gameCodeInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') createGame();
        });

        function createGame() {
            const code = gameCodeInput.value.trim().toUpperCase();
            if (!code) {
                alert('Por favor ingresa un cÃ³digo de sala');
                return;
            }

            creationForm.style.display = 'none';
            gameCodeDisplay.style.display = 'block';
            gameCodeElement.textContent = code;

            localStorage.setItem('talcual_game_code', code);
            localStorage.setItem('talcual_is_host', 'true');
        }

        btnOpenHost.addEventListener('click', () => {
            window.open('host.html', '_blank');
        });
    </script>
</body>
</html>