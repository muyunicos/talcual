# 1. OPTIMIZACIÓN CRÍTICA PARA SSE
<FilesMatch "sse-stream\.php$">
    # Deshabilitar compresión completamente
    SetEnv no-gzip 1
    SetEnv dont-vary 1
    
    # Forzar output inmediato (sin buffer)
    <IfModule mod_php.c>
        php_flag output_buffering Off
        php_flag zlib.output_compression Off
        php_flag implicit_flush On
    </IfModule>
    
    # Headers adicionales para evitar caching de eventos
    <IfModule mod_headers.c>
        Header set Cache-Control "no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "0"
        Header set X-Accel-Buffering "no"
    </IfModule>
</FilesMatch>

# 2. SEGURIDAD: BLINDAJE DE ARCHIVOS INTERNOS
<FilesMatch "^(Database|GameRepository|GameService|config|settings)\.php$">
    Order allow,deny
    Deny from all
</FilesMatch>

# 3. HEADERS DE SEGURIDAD GENERAL
<IfModule mod_headers.c>
    # Prevenir clickjacking (que metan tu juego en un iframe ajeno)
    Header set X-Frame-Options "SAMEORIGIN"
    # Prevenir ataques de MIME sniffing
    Header set X-Content-Type-Options "nosniff"
</IfModule>
